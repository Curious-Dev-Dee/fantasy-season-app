<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Cricket Experts | Home</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="css/home.css" />
  <link rel="stylesheet" href="css/bottom-nav.css" />
  
  <script type="module" src="auth-guard.js"></script>

  <style>
    body.loading-state .app-container { display: none; }
    body.loading-state #loadingOverlay { display: flex; }
    body:not(.loading-state) .app-container { display: block; animation: fadeIn 0.4s ease-out; }
    body:not(.loading-state) #loadingOverlay { display: none; }

    #loadingOverlay {
      position: fixed; inset: 0; background: #0c1117;
      display: flex; align-items: center; justify-content: center; z-index: 999;
    }
    
    .spinner {
      width: 40px; height: 40px; border: 4px solid rgba(154, 224, 0, 0.1);
      border-left-color: #9AE000; border-radius: 50%; animation: spin 1s linear infinite;
    }
    
    @keyframes spin { to { transform: rotate(360deg); } }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

    .hidden { display: none !important; }
  </style>

  <!-- Vercel Web Analytics -->
  <script>
    window.va = window.va || function () { (window.vaq = window.vaq || []).push(arguments); };
  </script>
  <script defer src="/_vercel/insights/script.js"></script>
</head>

<body class="loading-state">

<div id="loadingOverlay">
  <div class="spinner"></div>
</div>

<div class="app-container page-with-nav">
  
  <header class="app-header">
    <div class="header-content">
        <h1 id="tournamentName">Tournament</h1>
        </div>
  </header>

  <section class="card user-card">
    <div class="user-info">
      <div class="team-avatar" id="teamAvatar"></div>
      <div>
        <p class="welcome-text" id="welcomeText">Welcome back, Expert</p>
        <p class="team-subtitle" id="userTeamName">Set your team name</p>
      </div>
    </div>
  </section>

  <section class="card stats-card">
    <div class="stat-inline">
      <span class="stat-icon"><i class="fas fa-chart-line"></i></span>
      <span class="stat-label">Score</span>
      <span class="stat-value" id="userScore">0</span>
    </div>
    <div class="divider"></div>
    <div class="stat-inline">
      <span class="stat-icon"><i class="fas fa-trophy"></i></span>
      <span class="stat-label">Rank</span>
      <span class="stat-value highlight" id="userRank">—</span>
    </div>
    <div class="divider"></div>
    <div class="stat-inline">
      <span class="stat-icon"><i class="fas fa-arrows-rotate"></i></span>
      <span class="stat-label">Subs</span>
      <span class="stat-value" id="subsRemaining">0</span>
    </div>
    <div class="divider"></div>
    <div class="stat-inline">
      <span class="stat-icon" id="boosterIcon"><i class="fas fa-rocket"></i></span>
      <span class="stat-label">Boost</span>
      <span class="stat-value" id="boosterStatus">1</span>
    </div>
</section>

<section class="card next-match-card">
  <div class="match-badge-small">NEXT MATCH</div>
  
  <div class="match-vs-header">
      <div id="teamALogo" class="team-logo-dashboard"></div>
      
      <h3 class="match-teams" id="matchTeams">—</h3>
      
      <div id="teamBLogo" class="team-logo-dashboard"></div>
  </div>
  
  <p class="match-time neon-green" id="matchTime">
      <i class="far fa-clock"></i> Loading...
  </p>

  <div class="match-actions">
    <button class="secondary-btn" id="viewXiBtn">View Team</button>
    <button class="primary-btn" id="editXiBtn">Change</button>
  </div>
  <div class="btn-hint">Locks at match start time</div>
</section>

  <section class="card leaderboard-card">
    <div class="section-header">
        <h3>Top Experts</h3>
        <i class="fas fa-ranking-star"></i>
    </div>
    <div id="leaderboardContainer">
      <p style="color: #9ca3af; font-size: 13px;">Updating rankings...</p>
    </div>
    <button class="view-all-btn" id="viewFullLeaderboard">
      Full Leaderboard <i class="fas fa-chevron-right"></i>
    </button>
  </section>

</div>

<div id="profileModal" class="modal hidden">
  <div class="modal-content">
    <h2>Complete Profile</h2>
    <div class="upload-preview-container">
        <div id="modalAvatarPreview"></div>
        <label for="avatarInput" class="edit-icon-btn">
            <i class="fas fa-camera"></i>
        </label>
        <input type="file" id="avatarInput" accept="image/*" class="hidden" />
    </div>
    <div class="input-group">
        <label for="modalFullName">Your Name</label>
        <input type="text" id="modalFullName" placeholder="e.g. Satyaranjan Sahoo" />
    </div>
    <div class="input-group">
        <label for="modalTeamName">Team Name</label>
        <input type="text" id="modalTeamName" placeholder="e.g. AvengersCTC" />
    </div>
    <button id="saveProfileBtn" class="primary-btn full-width">Save & Start</button>
  </div>
</div>

<nav class="bottom-nav">
  <a href="home.html" class="active"><i class="fas fa-house"></i><span>Home</span></a>
  <a href="fixtures.html"><i class="fas fa-calendar-check"></i><span>Fixtures</span></a>
  <a href="prediction.html"><i class="fas fa-bolt"></i><span>Fun</span></a>
  <a href="more.html"><i class="fas fa-bars"></i><span>More</span></a>
</nav>

<script type="module" src="home.js"></script>
</body>
</html>
